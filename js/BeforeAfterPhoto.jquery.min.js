(function(f,c,b,h){var e="BeforeAfterEffect",g={width:100,height:100,orientation:"H"};function d(j,i){this.element=j;this.line=null,this.divisor=null,this.newDiv=null;this.options=f.extend({},g,i);this.options.orientation=this.options.orientation==="H"?this.options.orientation:"V";this._defaults=g;this._name=e;this.init()}d.prototype={init:function(){var k=this,q=f(this.element),p=this.options.width,j=this.options.height,i=this.options.orientation,o=q.find("img").eq(0),m=q.find("img").eq(1),n=f('<span class="capA"></span>'),l=f('<span class="capB"></span>');this.line=f('<div class="lineDivisor"></div>');this.divisor=f('<div class="hoverDivisor'+i+'"></div>');this.newDiv=f("<div></div>");q.addClass("BeforeAfterEffect").width(p).height(j).append(l).append(this.newDiv).append(this.line).append(this.divisor);this.newDiv.append(o).append(n);n.html(o.attr("alt"));l.html(m.attr("alt"));if(i=="H"){this.line.height(j)}else{this.line.width(p);l.css("top",j-(l.height()+parseInt(l.css("top").replace("px",""))))}q.bind("mousedown",function(r){k.setPosition({x:r.pageX-q.offset().left,y:r.pageY-q.offset().top},true)});a(this.divisor,{limitX:p,limitY:j,onMove:f.proxy(this,"setPosition")});this.setPosition({y:j/2,x:p/2});this.divisor.attr("unselectable","on");q.attr("onselectstart","return false;")},setPosition:function(k,j){var i=500;if(this.options.orientation=="H"){k.y=this.options.height/2;k.xG=k.x;k.yG=k.y*2}else{k.x=this.options.width/2;k.xG=k.x*2;k.yG=k.y}if(j){this.newDiv.stop().animate({width:k.xG,height:k.yG},i);this.divisor.stop().animate({left:k.x-(this.divisor.width()/2),top:k.y-(this.divisor.height()/2)},i);this.line.stop().animate({left:k.x-(this.line.width()/2),top:k.y-(this.line.height()/2)},i)}else{this.newDiv.css({width:k.xG,height:k.yG});this.divisor.css({left:k.x-(this.divisor.width()/2),top:k.y-(this.divisor.height()/2)});this.line.css({left:k.x-(this.line.width()/2),top:k.y-(this.line.height()/2)})}}};function a(k,j){var i=f(k),m=f.extend({limitX:1000,limitY:1000,onMove:function(){},onDrop:function(){}},j),l={drag:function(r){var q=r.data.dragData,p=q.left+(r.pageX-q.offLeft)+q.limitMinX-q.hoverLeft,o=q.top+(r.pageY-q.offTop)+q.limitMinY-q.hoverTop,n={x:Math.min(q.limitMaxX,Math.max(0,p)),y:Math.min(q.limitMaxY,Math.max(0,o))};q.onMove(n)},drop:function(o){var n=o.data.dragData;n.onDrop(o);f(b).unbind("mousemove",l.drag).unbind("mouseup",l.drop)}};i.bind("mousedown",function(n){n.stopPropagation();var p=f(this);p.getCss=function(r){var q=parseInt(this.css(r));if(isNaN(q)){return false}return q};var o={left:p.getCss("left")||0,top:p.getCss("top")||0,hoverLeft:n.layerX||n.offsetX,hoverTop:n.layerY||n.offsetY,offLeft:p.offset().left,offTop:p.offset().top,onMove:m.onMove,onDrop:m.onDrop,limitMinX:(p.width()/2),limitMinY:(p.height()/2),limitMaxX:m.limitX,limitMaxY:m.limitY,target:p};f(b).bind("mousemove",{dragData:o},l.drag).bind("mouseup",{dragData:o},l.drop)})}f.fn[e]=function(i){return this.each(function(){if(!f.data(this,"plugin_"+e)){f.data(this,"plugin_"+e,new d(this,i))}})}})(jQuery,window,document);